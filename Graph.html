
<html>
  <script src="https://www.google.com/jsapi" type="text/javascript"></script>
  <script>
        google.load('visualization', '1', {packages:['corechart']});

        google.setOnLoadCallback(drawTable);
        function drawTable() {
            var jscode_data = new google.visualization.DataTable();
jscode_data.addColumn("string", "QuoteTime", "quoteTime");
jscode_data.addColumn("number", "Last Traded Price", "last");
jscode_data.addColumn("number", "Best Ask", "ask");
jscode_data.addColumn("number", "Best Bid", "bid");
jscode_data.addColumn("number", "Ask Depth", "askDepth");
jscode_data.addColumn("number", "Bid Depth", "bidDepth");
jscode_data.addRows(6);
jscode_data.setCell(0, 0, "2016-04-21 10:45:50.068449-07:00");
jscode_data.setCell(0, 1, 100);
jscode_data.setCell(0, 3, 10);
jscode_data.setCell(0, 4, 0);
jscode_data.setCell(0, 5, 110);
jscode_data.setCell(1, 0, "2016-04-21 10:45:50.180836-07:00");
jscode_data.setCell(1, 1, 10);
jscode_data.setCell(1, 4, 0);
jscode_data.setCell(1, 5, 0);
jscode_data.setCell(2, 0, "2016-04-21 10:45:50.182338-07:00");
jscode_data.setCell(2, 1, 10);
jscode_data.setCell(2, 4, 0);
jscode_data.setCell(2, 5, 0);
jscode_data.setCell(3, 0, "2016-04-21 10:45:52.290444-07:00");
jscode_data.setCell(3, 3, 100);
jscode_data.setCell(3, 4, 0);
jscode_data.setCell(3, 5, 100);
jscode_data.setCell(4, 0, "2016-04-21 10:45:52.389363-07:00");
jscode_data.setCell(4, 2, 200);
jscode_data.setCell(4, 3, 100);
jscode_data.setCell(4, 4, 200);
jscode_data.setCell(4, 5, 100);
jscode_data.setCell(5, 0, "2016-04-21 10:45:54.535185-07:00");
jscode_data.setCell(5, 3, 100);
jscode_data.setCell(5, 4, 0);
jscode_data.setCell(5, 5, 100);

        var jscode_table = new google.visualization.ComboChart(document.getElementById('table_div_jscode'));

        var columns = [];
        var series = {};
        for (var i = 0; i < jscode_data.getNumberOfColumns(); i++) {
            columns.push(i);
            if (i < 4) {
                series[i - 1] = {targetAxisIndex:0, pointSize:5, lineWidth:0};    //index 0 is the price axes
            }
            else if(i <=5 ){
                series[i - 1] = {targetAxisIndex:1, type:'bars'};    //index 1 is the depth axes
            }
        }
        
        var options = {
        'title':'Post-Mordem Analyze', 
        'width':5000, 
        'height':800,
        'pointSize': 1,
        'series': series,
        vAxes:{
            0:{'title': 'Price'},
            1:{'title': "Depth"}
            }
        };

        jscode_table.draw(jscode_data, options);
            //based on http://jsfiddle.net/Khrys/5SD27/
         google.visualization.events.addListener(jscode_table, 'select', function () {
                //alert("something's selected");
                var sel = jscode_table.getSelection();
                // if selection length is 0, we deselected an element
                if (sel.length > 0) {
                    // if row is undefined, we clicked on the legend
                    if (sel[0].row === null) {
                        var col = sel[0].column;
                        if (columns[col] == col) {
                            // hide the data series
                            columns[col] = {
                                label: jscode_data.getColumnLabel(col),
                                type: jscode_data.getColumnType(col),
                                calc: function () {
                                    return null;
                                }
                            };
                            
                            // grey out the legend entry
                            series[col - 1].color = '#CCCCCC';
                        }
                        else {
                            // show the jscode_data series
                            columns[col] = col;
                            series[col - 1].color = null;
                        }
                        var view = new google.visualization.DataView(jscode_data);
                        view.setColumns(columns);
                        jscode_table.draw(view, options);
                    }
                }
            });
    }
  </script>
  <style type="text/css">
    HTML{
        font-family:arial;
        text-align:center
    }

  </style>
  <body>
    <H2>Stockfighter 2016</H2>
    <div id="table_div_jscode"></div>
    <H3>
        Venue-TESTEX Trading FOOBAR.  
    </H3>
    <H4>printed on '2016-04-21 10:44'. Table created using gviz_api</H4>
  </body>
</html>
